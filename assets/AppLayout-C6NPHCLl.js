import{r as m,j as e,a as k,R as u,N as y,u as b,b as C,c as M,d as h,e as I,O as E,p as d}from"./index-Bh3Pq5fI.js";import{X as g,B as p,C as v,U as S,a as O,b as B,I as T,c as $,d as L}from"./index-DI_LCI5M.js";const R=({isOpen:r,onClose:t,title:i,message:c,type:a})=>{if(m.useEffect(()=>{if(r){const o=setTimeout(()=>{t()},3e3);return()=>clearTimeout(o)}},[r,t]),!r)return null;const l=(()=>{switch(a){case"inflow":return{bg:"bg-emerald-50 dark:bg-emerald-900/20",border:"border-emerald-200 dark:border-emerald-700",icon:"text-emerald-500 dark:text-emerald-400",text:"text-emerald-700 dark:text-emerald-300"};case"expense":return{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-700",icon:"text-red-500 dark:text-red-400",text:"text-red-700 dark:text-red-300"}}})();return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 animate-fade-in",onClick:t,children:[e.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm"}),e.jsxs("div",{className:`relative ${l.bg} ${l.border} border-2 rounded-2xl p-8 max-w-sm w-full shadow-2xl animate-scale-in`,onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`${l.icon} rounded-full bg-white dark:bg-slate-800 p-3 shadow-lg`,children:e.jsx("svg",{className:"w-16 h-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h3",{className:`text-2xl font-bold text-center ${l.text} mb-2`,children:i}),e.jsx("p",{className:"text-center text-slate-600 dark:text-slate-400 text-lg",children:c}),e.jsx("button",{onClick:t,className:`mt-6 w-full ${a==="inflow"?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"} text-white font-bold py-3 rounded-lg transition-colors`,children:"Cerrar"})]})]})},W=()=>{const[r,t]=m.useState([]);m.useEffect(()=>k(n=>{const l={...n,id:`error-${Date.now()}-${Math.random()}`};t(o=>[...o,l]),setTimeout(()=>{t(o=>o.filter(x=>x.id!==l.id))},5e3)}),[]);const i=a=>{t(n=>n.filter(l=>l.id!==a))};if(r.length===0)return null;const c=a=>{switch(a){case"storage":return"bg-orange-500";case"validation":return"bg-yellow-500";case"network":return"bg-red-500";default:return"bg-slate-500"}};return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md",children:r.map(a=>e.jsxs("div",{className:`${c(a.type)} text-white px-4 py-3 rounded-lg shadow-lg flex items-start gap-3 animate-fade-in`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:a.message}),a.details&&e.jsx("p",{className:"text-sm opacity-90 mt-1",children:a.details})]}),e.jsx("button",{onClick:()=>i(a.id),className:"p-1 hover:bg-white/20 rounded transition-colors","aria-label":"Cerrar",children:e.jsx(g,{className:"w-4 h-4"})})]},a.id))})},z=({isOpen:r,onClose:t,currentView:i,onNavigate:c})=>{const[a,n]=m.useState(!1);m.useEffect(()=>{if(r){const o=document.body.style.overflow;document.body.style.overflow="hidden";const x=setTimeout(()=>n(!0),10);return()=>{document.body.style.overflow=o,n(!1),clearTimeout(x)}}else n(!1)},[r]);const l=o=>{t(),c(o)};return r?e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-[2px]",onClick:t}),e.jsxs("div",{className:`relative ml-0 h-full w-[80vw] max-w-sm sm:max-w-md bg-white dark:bg-slate-800 shadow-2xl z-50 transform transition-transform duration-300 ease-out ${a?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Menú"})]}),e.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors","aria-label":"Cerrar menú",children:e.jsx(g,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"py-2",children:e.jsx("nav",{"aria-label":"Menú principal",className:"py-2",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>l("home"),"aria-current":i==="home"||void 0,className:"w-full px-5 py-4 text-left flex items-center gap-4 text-lg font-medium text-slate-800 dark:text-slate-100 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors",children:[e.jsx(v,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"}),e.jsx("span",{children:"Inicio"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>l("clients"),"aria-current":i==="clients"||void 0,className:"w-full px-5 py-4 text-left flex items-center gap-4 text-lg font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx(S,{className:"w-6 h-6 text-slate-400"}),e.jsx("span",{children:"Contactos"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>l("settings"),"aria-current":i==="settings"||void 0,className:"w-full px-5 py-4 text-left flex items-center gap-4 text-lg font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx(O,{className:"w-6 h-6 text-slate-400"}),e.jsx("span",{children:"Ajustes"})]})})]})})})]}),e.jsx("div",{className:"flex-1"})]}):null},P=[{to:u.HOME,icon:v,label:"Inicio"},{to:u.LIBRETA,icon:B,label:"Libreta"},{to:u.INVENTORY,icon:T,label:"Inventario"},{to:u.POS,icon:$,label:"POS"}],A=()=>e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 shadow-lg z-50 safe-area-bottom",children:e.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:e.jsx("div",{className:"flex justify-around items-center",children:P.map(({to:r,icon:t,label:i})=>e.jsxs(y,{to:r,end:r===u.HOME,className:({isActive:c})=>`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${c?"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20":"text-slate-600 dark:text-slate-400 hover:text-emerald-600 dark:hover:text-emerald-400"}`,children:[e.jsx(t,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xs font-medium",children:i})]},r))})})}),D=()=>{const r=b();m.useEffect(()=>{const t=document.querySelector("main");t&&(t.scrollTop=0),window.scrollTo(0,0)},[r.pathname])},q=()=>{const r=b(),t=C();D();const i=M(s=>s.setDarkMode),c=h(s=>s.isMenuOpen),a=h(s=>s.setMenuOpen),n=h(s=>s.successModal),l=h(s=>s.hideSuccessModal);m.useEffect(()=>{const s=document.documentElement.classList.contains("dark");i(s)},[i]);const o=()=>{const s=r.pathname;return s==="/"?"home":s.startsWith("/inventory")?"inventory":s.startsWith("/libreta")?"libreta":s.startsWith("/contacts")?"clients":s.startsWith("/settings")?"settings":s.startsWith("/coming-soon")?"coming-soon":"home"},x=s=>{switch(s){case"home":t(d.home());break;case"inventory":t(d.inventory());break;case"libreta":t(d.libreta());break;case"clients":t(d.contacts());break;case"settings":t(d.settings());break;case"coming-soon":t(d.comingSoon());break;default:t(d.home())}a(!1)},j=h(s=>s.hideBottomNav),f=(()=>{if(j)return!1;const s=r.pathname,N=["/new-inflow","/new-expense","/transaction/"];for(const w of N)if(s.includes(w))return!1;return!s.match(/\/(inventory|libreta|contacts|settings)\/[^/]+/)})();return e.jsxs("div",{className:"h-screen text-slate-900 dark:text-slate-200 transition-colors duration-300 font-sans flex flex-col overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-72 bg-gradient-to-br from-emerald-500 to-teal-600 dark:from-emerald-800 dark:to-teal-900 rounded-b-[3rem]"}),e.jsxs("div",{className:"relative flex flex-col flex-1 min-h-0",children:[e.jsxs("nav",{className:"flex justify-between items-center mb-4 sm:mb-6 relative z-10 flex-shrink-0 px-4 pt-4",children:[e.jsx("button",{onClick:()=>a(!c),className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors","aria-label":"Menu",children:e.jsx(p,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white tracking-tight",children:"Mi Empresa S.A"}),e.jsx("button",{className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors relative","aria-label":"Notificaciones",children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsx(z,{isOpen:c,onClose:()=>a(!1),currentView:o(),onNavigate:x}),e.jsx("main",{className:`flex flex-col items-center flex-1 overflow-y-auto overflow-x-hidden scroll-container min-h-0 ${f?"pb-20":""}`,children:e.jsx(I.Suspense,{fallback:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})}),children:e.jsx(E,{})})})]}),e.jsx(R,{isOpen:n.isOpen,onClose:()=>{l()},title:n.title,message:n.message,type:n.type}),f&&e.jsx(A,{}),e.jsx(W,{})]})};export{q as default};
