import{r as a,j as e}from"./index-CD6owFN-.js";import{X as p}from"./index-CBIxuy-n.js";const f=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:s||"w-6 h-6",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 013.75 9.375v-4.5zM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5zM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0113.5 9.375v-4.5z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75zM6.75 16.5h.75v.75h-.75v-.75zM16.5 6.75h.75v.75h-.75v-.75zM13.5 13.5h.75v.75h-.75v-.75zM13.5 19.5h.75v.75h-.75v-.75zM19.5 13.5h.75v.75h-.75v-.75zM19.5 19.5h.75v.75h-.75v-.75zM16.5 16.5h.75v.75h-.75v-.75z"})]}),j=({isOpen:s,onClose:r,onScan:l,title:b="Escanear Código",subtitle:n="Apunta la cámara al código de barras"})=>{const[d,h]=a.useState(!1),[c,o]=a.useState(""),[g,i]=a.useState(!1),[u,m]=a.useState(null);a.useEffect(()=>{s?(h(!0),o(""),i(!1),m(null)):h(!1)},[s]),a.useEffect(()=>{if(!(!s||!d))return console.log("[BarcodeScanner] Scanner initialized (stub)"),()=>{console.log("[BarcodeScanner] Scanner cleanup (stub)")}},[s,d]);const x=a.useCallback(()=>{const t=c.trim();if(!t){m("Ingresa un código válido");return}l({barcode:t,format:"manual"}),r()},[c,l,r]),v=a.useCallback(()=>{const t=Math.floor(Math.random()*9e12)+1e12;l({barcode:t.toString(),format:"EAN-13"}),r()},[l,r]);return s?e.jsxs("div",{className:"fixed inset-0 z-[80] flex flex-col bg-black",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/80 backdrop-blur-sm",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:b}),e.jsx("p",{className:"text-white/70 text-sm",children:n})]}),e.jsx("button",{onClick:r,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Cerrar escáner",children:e.jsx(p,{className:"w-6 h-6 text-white"})})]}),e.jsx("div",{className:"flex-1 relative overflow-hidden",children:e.jsxs("div",{className:"absolute inset-0 bg-slate-900 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-800 via-slate-900 to-slate-800"}),e.jsxs("div",{className:"relative z-10 w-72 h-72",children:[e.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-l-4 border-t-4 border-emerald-500 rounded-tl-lg"}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-r-4 border-t-4 border-emerald-500 rounded-tr-lg"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-l-4 border-b-4 border-emerald-500 rounded-bl-lg"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-r-4 border-b-4 border-emerald-500 rounded-br-lg"}),e.jsx("div",{className:"absolute left-4 right-4 h-0.5 bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.8)] animate-scan-line"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-white/30 rounded-full"})})]}),e.jsxs("div",{className:"absolute bottom-8 left-0 right-0 text-center",children:[e.jsx("p",{className:"text-white/80 text-sm mb-2",children:"Coloca el código de barras dentro del marco"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-emerald-400 text-xs",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Escaneando..."})]})]})]})}),e.jsxs("div",{className:"bg-black/90 backdrop-blur-sm px-4 py-4 space-y-3 safe-area-bottom",children:[u&&e.jsx("div",{className:"text-red-400 text-sm text-center bg-red-900/20 px-3 py-2 rounded-lg",children:u}),g?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:c,onChange:t=>{o(t.target.value),m(null)},placeholder:"Ingresa el código manualmente",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",autoFocus:!0,onKeyDown:t=>t.key==="Enter"&&x()})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-3 bg-white/10 text-white font-medium rounded-xl hover:bg-white/20 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:x,className:"flex-1 py-3 bg-emerald-600 text-white font-semibold rounded-xl hover:bg-emerald-700 transition-colors",children:"Buscar"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:v,className:"w-full py-3 bg-emerald-600 text-white font-semibold rounded-xl hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),"Simular Escaneo (Demo)"]}),e.jsx("button",{onClick:()=>i(!0),className:"w-full py-3 bg-white/10 text-white font-medium rounded-xl hover:bg-white/20 transition-colors",children:"Ingresar código manualmente"})]})]}),e.jsx("style",{children:`
        @keyframes scan-line {
          0%, 100% { top: 1rem; }
          50% { top: calc(100% - 1rem); }
        }
        .animate-scan-line {
          animation: scan-line 2s ease-in-out infinite;
        }
        .safe-area-bottom {
          padding-bottom: max(1rem, env(safe-area-inset-bottom));
        }
      `})]}):null},k=({onScan:s,title:r,subtitle:l,className:b="",iconOnly:n=!1,size:d="md",variant:h="secondary"})=>{const[c,o]=a.useState(!1),g=a.useCallback(x=>{s(x),o(!1)},[s]),i={sm:n?"p-1.5":"px-2.5 py-1.5 text-xs",md:n?"p-2":"px-3 py-2 text-sm",lg:n?"p-3":"px-4 py-2.5 text-base"},u={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},m={primary:"bg-emerald-600 hover:bg-emerald-700 text-white border-emerald-600 shadow-sm",secondary:"bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 border-slate-200 dark:border-slate-700 shadow-sm",ghost:"bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400 border-transparent"};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>o(!0),className:`
          inline-flex items-center justify-center gap-2 font-medium rounded-lg border transition-colors
          ${i[d]}
          ${m[h]}
          ${b}
        `,"aria-label":"Escanear código de barras",children:[e.jsx(f,{className:u[d]}),!n&&e.jsx("span",{children:"Escanear"})]}),e.jsx(j,{isOpen:c,onClose:()=>o(!1),onScan:g,title:r,subtitle:l})]})};export{k as B};
